<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="apple-itunes-app" content="app-id=1461458147, app-argument=weather"/>
    <link rel="stylesheet" href="/assets/css/bootstrap-3.3.7.min.css?v=202009082"/>
    <link rel="stylesheet" href="/assets/css/style.css?v=202009082"/>
    <script src="/assets/js/jquery-1.11.0.min.js?v=202009082"></script>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>

    
<header class="navbar-fixed-top">
  <nav class="container" id="header-nav">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">
        <img src="/assets/images/logo-white.png?v=202009082" alt="myBlog">
        <span>不停的博客</span>
      </a>
    </div>
    <ul class="nav navbar-nav navbar-left">
      <li ><a href="/">首页</a></li>
      <li ><a href="/works/tjxx/">工作经历</a></li>
      <li class="active"><a href="/docs/start/">笔记</a></li>
      <li><a href="https://github.com/yuanqinghua-star" target="_blank" >Github</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-left weather-widget visible-lg visible-md visible-sm">
    <li>
      <div id="he-plugin-simple"></div>
      <script>
        WIDGET = {
          CONFIG: {
            "modules": "20",
            "background": 5,
            "tmpColor": "FFFFFF",
            "tmpSize": "14",
            "cityColor": "FFFFFF",
            "citySize": "14",
            "aqiSize": "14",
            "weatherIconSize": "18",
            "alertIconSize": "14",
            "padding": "0px 0px 0px 0px",
            "shadow": "0",
            "language": "zh",
            "fixed": "false",
            "vertical": "middle",
            "horizontal": "center",
            "key": "acd0fdcab4b9481a98d0f59145420fac"
          }
        }
      </script>
      <script src="https://widget.heweather.net/simple/static/js/he-simple-common.js?v=1.2"></script>
    </li>
  </ul> 
  </nav>
</header>



<div class="container">
    <div class="row" id='docs-main'>
        
        <aside class="col-sm-3 col-md-3 col-lg-3 hidden-xs">
  <nav class="navbar navbar-default nav-stacked doc-nav">

    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/start/"
        title="开始">开始</a>
      <ul class="nav collapse ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/
          ">快速开始</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/get-api-key
          ">创建应用和KEY</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/status-code
          ">错误状态码</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/language
          ">多语言</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/icons
          ">天气图标</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/location-list
          ">常见城市列表</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/unit
          ">单位</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/glossary
          ">名词解释</a>
        </li>
        

      </ul>
    </div>
    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/sdk/"
        title="SDK">SDK</a>
      <ul class="nav collapse ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/
          ">概述</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/ios-sdk
          ">iOS SDK</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/ios-entity
          ">iOS 数据类属性</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/android-sdk
          ">Android SDK</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/android-entity
          ">Android数据类属性</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/release
          ">下载和更新记录</a>
        </li>
        

      </ul>
    </div>
    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/widget/"
        title="天气插件">天气插件</a>
      <ul class="nav collapse ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/
          ">概述</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/ios-widget
          ">iOS天气插件</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/android-widget
          ">Android天气插件</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/mobile-page
          ">H5天气网页/频道页</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/standard-widget
          ">网页标准插件</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/simple-widget
          ">网页简约插件</a>
        </li>
        

      </ul>
    </div>
    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/library/"
        title="代码库">代码库</a>
      <ul class="nav collapse ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/library/
          ">概述</a>
        </li>
        

      </ul>
    </div>
    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/faq/"
        title="常见问题">常见问题</a>
      <ul class="nav collapse in ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/faq/general
          ">一般问题</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/faq/buy
          ">商业数据和购买</a>
        </li>
        
        
        
        

        <li class="active" >
          <a class="doc-nav-item-link" href="
          /docs/faq/technical
          ">技术和开发</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/faq/user
          ">用户和账号</a>
        </li>
        

      </ul>
    </div>
    
  </nav>
</aside>

<!-- for mobile -->
<nav class="navbar navbar-default" id="header-slidebar">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
        data-target="#bs-example-navbar-collapse-1" aria-expanded="false" id="header-slidebar-btn">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">
        笔记
      </a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">开始<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/start/
              ">
                快速开始
              </a></li>
            
            
            
            <li><a href="
              /docs/start/get-api-key
              ">
                创建应用和KEY
              </a></li>
            
            
            
            <li><a href="
              /docs/start/status-code
              ">
                错误状态码
              </a></li>
            
            
            
            <li><a href="
              /docs/start/language
              ">
                多语言
              </a></li>
            
            
            
            <li><a href="
              /docs/start/icons
              ">
                天气图标
              </a></li>
            
            
            
            <li><a href="
              /docs/start/location-list
              ">
                常见城市列表
              </a></li>
            
            
            
            <li><a href="
              /docs/start/unit
              ">
                单位
              </a></li>
            
            
            
            <li><a href="
              /docs/start/glossary
              ">
                名词解释
              </a></li>
            
          </ul>
          
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">SDK<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/sdk/
              ">
                概述
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/ios-sdk
              ">
                iOS SDK
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/ios-entity
              ">
                iOS 数据类属性
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/android-sdk
              ">
                Android SDK
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/android-entity
              ">
                Android数据类属性
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/release
              ">
                下载和更新记录
              </a></li>
            
          </ul>
          
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">天气插件<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/widget/
              ">
                概述
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/ios-widget
              ">
                iOS天气插件
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/android-widget
              ">
                Android天气插件
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/mobile-page
              ">
                H5天气网页/频道页
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/standard-widget
              ">
                网页标准插件
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/simple-widget
              ">
                网页简约插件
              </a></li>
            
          </ul>
          
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">代码库<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/library/
              ">
                概述
              </a></li>
            
          </ul>
          
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">常见问题<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/faq/general
              ">
                一般问题
              </a></li>
            
            
            
            <li><a href="
              /docs/faq/buy
              ">
                商业数据和购买
              </a></li>
            
            
            
            <li><a href="
              /docs/faq/technical
              ">
                技术和开发
              </a></li>
            
            
            
            <li><a href="
              /docs/faq/user
              ">
                用户和账号
              </a></li>
            
          </ul>
          
        </li>
      </ul>
    </div>
  </div>
</nav>
        
        
            <section class="col-sm-9 col-md-9 col-lg-9 col-xs-12">
                
                <div class="docs-header">
                    <h1>开发常见问题</h1>
                    
                </div>
                <article class="docs-content">
                    
                    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h3"><a href="#notes">注意事项</a></li>
<li class="toc-entry toc-h3"><a href="#error-occurred">发生了错误</a></li>
<li class="toc-entry toc-h3"><a href="#ios-bundle-identifier">iOS Bundle identifier</a></li>
<li class="toc-entry toc-h3"><a href="#android-package-name">Android Package Name</a></li>
<li class="toc-entry toc-h3"><a href="#signature-authentication">数字签名</a></li>
<li class="toc-entry toc-h3"><a href="#update-time">天气数据的更新频率是多少</a></li>
<li class="toc-entry toc-h3"><a href="#language">支持多语言吗</a></li>
<li class="toc-entry toc-h3"><a href="#weather-icons">有没有天气图标</a></li>
<li class="toc-entry toc-h3"><a href="#city-list">有没有城市ID？</a></li>
<li class="toc-entry toc-h3"><a href="#more-questions">遇到其他技术问题怎么办</a></li>
</ul><h3 id="notes">
<a class="anchor" href="#notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>注意事项</h3>

<ul>
  <li>无论任何时候，不要假定返回的数据都是完整的，或者对返回数据的长度、范围进行假设。例如：当我们的数据源缺少某些数据的时候可能会导致字段缺失；高纬度地区某一天可能会出现没有日出日落的情况；天气状况可能会增加新的代码；当我们的功能升级时，可能在数据返回中增加新的字段或参数。因此在你的程序中必须考虑如何处理这种问题。</li>
  <li>如非必要，不要缓存数据，确保每次获取的都是最新的数据，最新的城市ID或最新的天气状况代码。</li>
  <li>所有预报数据都不能保证100%准确，因此可能会出现实况温度要高于或低于当天预报的最高/最低温度。</li>
  <li>实况数据均为近实时数据，相比真实的物理世界会5-20分钟的延迟，请根据实况数据中的<code class="language-plaintext highlighter-rouge">obsTime</code>确定数据对应的准确时间。</li>
  <li>v7版本API默认采用gizp压缩，可降低你的设备带宽流量，提高响应速度。</li>
  <li>使用移动端或服务端SDK，可以大幅减轻你的工作量。</li>
</ul>

<h3 id="error-occurred">
<a class="anchor" href="#error-occurred" aria-hidden="true"><span class="octicon octicon-link"></span></a>发生了错误</h3>

<p>当你发现天气数据并没有像往常一样正常的返回数据，那么一定是哪个地方出现了错误：</p>

<ul>
  <li>请检查返回的错误状态码并查看<a href="https://dev.heweather.com/docs/start/status-code">它们的具体含义</a>，如果返回的值是200，则检查你的程序。</li>
  <li>在我们提供的API调试页面尝试调用接口，如果一切正常，请检查你的程序。</li>
  <li>本地测试正常，但是生产环境出现错误的时候，请检查你的程序或咨询你的服务器管理员，我们的数据服务无法知道自己在什么环境之中。</li>
</ul>

<p>如果问题不能解决，请登录<a href="https://console.heweather.com">控制台</a>提交技术工单。</p>

<h3 id="ios-bundle-identifier">
<a class="anchor" href="#ios-bundle-identifier" aria-hidden="true"><span class="octicon octicon-link"></span></a>iOS Bundle identifier</h3>

<p>Xcode切换到Info下，可查看Bundle Identifier。</p>

<p>请注意Bundle ID仅限英文字母、数字、短横线和下划线，且在每一段开头必须使用英文字母，每一段的结尾必须使用英文字母或数字。</p>

<ul>
  <li>abc.xyz.def <strong class="good">Good</strong>
</li>
  <li>abc.xyz   <strong class="good">Good</strong>
</li>
  <li>abc.x1.y-z   <strong class="good">Good</strong>
</li>
  <li>abc.1x.2y.3z <strong class="bad">Bad</strong>
</li>
  <li>1a.xyz.def <strong class="bad">Bad</strong>
</li>
  <li>abc.xyz_ <strong class="bad">Bad</strong>
</li>
</ul>

<h3 id="android-package-name">
<a class="anchor" href="#android-package-name" aria-hidden="true"><span class="octicon octicon-link"></span></a>Android Package Name</h3>

<p>打开Android 应用工程的<strong>AndroidManifest.xml</strong>配置文件，<strong>package</strong>属性所对应的内容为应用包名。</p>

<p>请注意Android Package Name仅限英文字母、数字、短横线和下划线，且在每一段开头必须使用英文字母，每一段的结尾必须使用英文字母或数字。</p>

<ul>
  <li>abc.xyz.def <strong class="good">Good</strong>
</li>
  <li>abc.xyz   <strong class="good">Good</strong>
</li>
  <li>abc.x1.y-z   <strong class="good">Good</strong>
</li>
  <li>abc.1x.2y.3z <strong class="bad">Bad</strong>
</li>
  <li>1a.xyz.def <strong class="bad">Bad</strong>
</li>
  <li>abc.xyz_ <strong class="bad">Bad</strong>
</li>
</ul>

<h3 id="signature-authentication">
<a class="anchor" href="#signature-authentication" aria-hidden="true"><span class="octicon octicon-link"></span></a>数字签名</h3>

<p>为了接口调用的安全性，我们推荐你使用数字签名认证方式进行接口访问的认证，数字签名方式是一种替代单独API KEY的更安全的接口访问方式，它会对请求参数加密后得到的签名字串进行身份验证。虽然我们一直强制要求使用HTTPS加密的接口调用方式，已经足够确保你的安全性，但加密签名的方式则避免了API KEY由于各种原因泄露给第三方而导致的风险。</p>

<ul>
  <li>
    <p><strong>数字签名所需要的参数</strong></p>

    <p><code class="language-plaintext highlighter-rouge">publicid</code>: 公共ID，每个KEY都对应一个公共ID，可在<a href="https://console.heweather.com">控制台</a>查看</p>

    <p><code class="language-plaintext highlighter-rouge">t</code>: 时间戳，秒级</p>

    <p><code class="language-plaintext highlighter-rouge">sign</code>: 数字签名</p>
  </li>
  <li>
<strong>创建数字签名</strong>
    <ol>
      <li>将请求参数格式化为“key=value”格式，如“k1=v1”、“k2=v2”、“k3=v3”；</li>
      <li>去除请求参数中值为空的参数</li>
      <li>去除请求参数中参数为<code class="language-plaintext highlighter-rouge">sign</code> 的参数 ( 签名参数不参与签名算法 )</li>
      <li>将第3步剩余的键值对以字典序升序排列，并用 &amp; 符号连接，如 a=1&amp;b=2&amp;m=3&amp;w=4</li>
      <li>将第4步得到的字符串后拼接上API密钥, 假设密钥为 abc , 则 结果为:   a=1&amp;b=2&amp;m=3&amp;w=4abc</li>
      <li>将第5步得到的字符串进行MD5加密 ( 注 ：字符集为 UTF-8 )，得到签名结果</li>
      <li>将第6步得到的签名结果 作为参数添加至请求中，参数名为 <code>sign</code>, 即 <code>sign=xxxxxxx</code>
</li>
    </ol>
  </li>
  <li>
    <p><strong>数字签名PHP版本</strong></p>

    <div class="language-php highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">// 待签名字符串</span>
<span class="nv">$str</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="c1">// 先将参数以其参数名的字典序升序进行排序</span>
<span class="nb">array_filter</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">'sign'</span><span class="p">]);</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">'key'</span><span class="p">]);</span>
<span class="nb">ksort</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
<span class="c1">// 遍历排序后的参数数组中的每一个key/value对</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$params</span> <span class="k">as</span> <span class="nv">$k</span> <span class="o">=&gt;</span> <span class="nv">$v</span><span class="p">){</span>
    <span class="nv">$str</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$k</span> <span class="mf">.</span> <span class="s1">'='</span> <span class="mf">.</span> <span class="nv">$v</span> <span class="mf">.</span> <span class="s1">'&amp;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$str</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$str</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$str</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="c1">// 将签名密钥拼接到签名字符串最后面</span>
<span class="nv">$str</span> <span class="mf">.</span><span class="o">=</span> <span class="nv">$secret</span><span class="p">;</span>
<span class="c1">// 通过md5算法为签名字符串生成一个md5签名，该签名就是我们要追加的sign参数值</span>
<span class="nv">$sign</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$str</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>数字签名JAVA版</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="cm">/**
     * 和风天气签名生成算法-JAVA版本
     * @param HashMap params 请求参数集，所有参数必须已转换为字符串类型
     * @param String secret 签名密钥（用户的认证key）
     * @return 签名
     * @throws IOException
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getSignature</span><span class="o">(</span><span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">params</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="c1">// 先将参数以其参数名的字典序升序进行排序</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span>            <span class="n">sortedParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeMap</span><span class="o">&lt;&gt;(</span><span class="n">params</span><span class="o">);</span>
        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="n">entrys</span>       <span class="o">=</span> <span class="n">sortedParams</span><span class="o">.</span><span class="na">entrySet</span><span class="o">();</span>
  
        <span class="c1">// 遍历排序后的字典，将所有参数按"key=value"格式拼接在一起</span>
        <span class="nc">StringBuilder</span> <span class="n">baseString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span> <span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">param</span> <span class="o">:</span> <span class="n">entrys</span> <span class="o">)</span> <span class="o">{</span>
            <span class="c1">//sign参数 和 空值参数 不加入算法</span>
            <span class="k">if</span> <span class="o">(</span> <span class="n">param</span><span class="o">.</span><span class="na">getValue</span><span class="o">()!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="s">""</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">trim</span><span class="o">())</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="s">"sign"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getKey</span>  <span class="o">().</span><span class="na">trim</span><span class="o">())</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="s">"key"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">trim</span><span class="o">())</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="s">""</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">trim</span><span class="o">())</span> <span class="o">)</span> <span class="o">{</span>
                <span class="n">baseString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">trim</span><span class="o">()).</span><span class="na">append</span><span class="o">(</span><span class="s">"="</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">trim</span><span class="o">()).</span><span class="na">append</span>  <span class="o">(</span><span class="s">"&amp;"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">baseString</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">)</span> <span class="o">{</span>
            <span class="n">baseString</span><span class="o">.</span><span class="na">deleteCharAt</span><span class="o">(</span><span class="n">baseString</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">secret</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">// 使用MD5对待签名串求签</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">MessageDigest</span> <span class="n">md5</span> <span class="o">=</span> <span class="nc">MessageDigest</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"MD5"</span><span class="o">);</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">md5</span><span class="o">.</span><span class="na">digest</span><span class="o">(</span><span class="n">baseString</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">));</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">encodeHex</span><span class="o">(</span><span class="n">bytes</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">GeneralSecurityException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="n">ex</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
      
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">char</span><span class="o">[]</span> <span class="nf">encodeHex</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
   <span class="kt">int</span>    <span class="n">l</span>        <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
   <span class="kt">char</span><span class="o">[]</span> <span class="n">out</span>      <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">l</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="o">];</span>
   <span class="kt">int</span>    <span class="n">i</span>        <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
   <span class="kt">char</span><span class="o">[]</span> <span class="n">toDigits</span> <span class="o">=</span> <span class="o">{</span> <span class="sc">'0'</span><span class="o">,</span> <span class="sc">'1'</span><span class="o">,</span> <span class="sc">'2'</span><span class="o">,</span> <span class="sc">'3'</span><span class="o">,</span> <span class="sc">'4'</span><span class="o">,</span> <span class="sc">'5'</span><span class="o">,</span> <span class="sc">'6'</span><span class="o">,</span> <span class="sc">'7'</span><span class="o">,</span> <span class="sc">'8'</span><span class="o">,</span> <span class="sc">'9'</span><span class="o">,</span> <span class="sc">'a'</span><span class="o">,</span> <span class="sc">'b'</span><span class="o">,</span> <span class="sc">'c'</span><span class="o">,</span> <span class="sc">'d'</span><span class="o">,</span> <span class="sc">'e'</span><span class="o">,</span> <span class="sc">'f'</span> <span class="o">};</span>
    <span class="k">for</span> <span class="o">(</span> <span class="kt">int</span> <span class="n">var5</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">l</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">out</span><span class="o">[</span><span class="n">var5</span><span class="o">++]</span> <span class="o">=</span> <span class="n">toDigits</span><span class="o">[(</span><span class="mi">240</span> <span class="o">&amp;</span> <span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">4</span><span class="o">];</span>
        <span class="n">out</span><span class="o">[</span><span class="n">var5</span><span class="o">++]</span> <span class="o">=</span> <span class="n">toDigits</span><span class="o">[</span><span class="mi">15</span> <span class="o">&amp;</span> <span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]];</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">out</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>数字签名JavaScript版</strong></p>

    <div class="language-js highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">privateKey</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">XXXXX</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">parameters</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">parameters</span><span class="p">[</span><span class="dl">'</span><span class="s1">location</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">101010100</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">parameters</span><span class="p">[</span><span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">PublicKey</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">parameters</span><span class="p">[</span><span class="dl">'</span><span class="s1">t</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">1590123123</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">parameters</span><span class="p">[</span><span class="dl">'</span><span class="s1">w</span><span class="dl">'</span><span class="p">]</span> <span class="o">=</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">;</span>
  
<span class="kd">function</span> <span class="nx">getSignature</span><span class="p">(</span><span class="nx">parameterObject</span><span class="p">,</span> <span class="nx">privateKey</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">k</span> <span class="k">in</span> <span class="nx">parameterObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">k</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">key</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">k</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">sign</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="sr">/^</span><span class="se">\s</span><span class="sr">+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="sr">/^</span><span class="se">\s</span><span class="sr">+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">parameterObject</span><span class="p">[</span><span class="nx">k</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
  
    <span class="nx">keys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
  
    <span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">keys</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="sr">/</span><span class="se">\s</span><span class="sr">+/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">parameterObject</span><span class="p">[</span><span class="nx">k</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nx">str</span> <span class="o">+=</span> <span class="nx">k</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">=</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">parameterObject</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&amp;</span><span class="dl">'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">str</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">privateKey</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">md5</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="update-time">
<a class="anchor" href="#update-time" aria-hidden="true"><span class="octicon octicon-link"></span></a>天气数据的更新频率是多少</h3>

<table>
  <thead>
    <tr>
      <th>天气种类</th>
      <th>更新频率</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>灾害预警</td>
      <td>5分钟</td>
    </tr>
    <tr>
      <td>逐天天气预报</td>
      <td>1小时</td>
    </tr>
    <tr>
      <td>逐小时天气</td>
      <td>1小时</td>
    </tr>
    <tr>
      <td>生活指数</td>
      <td>每天更新3次，分别在8，11，18点左右更新</td>
    </tr>
    <tr>
      <td>实况天气</td>
      <td>10-20分钟</td>
    </tr>
    <tr>
      <td>空气质量实况</td>
      <td>1小时</td>
    </tr>
    <tr>
      <td>空气质量预报</td>
      <td>1小时</td>
    </tr>
    <tr>
      <td>格点天气实况</td>
      <td>20-40分钟</td>
    </tr>
    <tr>
      <td>格点天气逐天预报</td>
      <td>1小时</td>
    </tr>
    <tr>
      <td>格点天气逐小时预报</td>
      <td>1小时</td>
    </tr>
    <tr>
      <td>分钟级降雨</td>
      <td>10-20分钟</td>
    </tr>
    <tr>
      <td>卫星云图</td>
      <td>30-60分钟</td>
    </tr>
  </tbody>
</table>

<p>请注意：由于天气数据的特殊性以及数据更新的持续性，无法确定精确的更新时间，请以接口返回数据的<code class="language-plaintext highlighter-rouge">updateTime</code>字段为准</p>

<h3 id="language">
<a class="anchor" href="#language" aria-hidden="true"><span class="octicon octicon-link"></span></a>支持多语言吗</h3>

<p>我们<a href="/docs/start/language">支持30+种语言</a>，并不断新增中。你可以在你的API请求中添加<code class="language-plaintext highlighter-rouge">lang=xx</code>来获取对应的语言。</p>

<h3 id="weather-icons">
<a class="anchor" href="#weather-icons" aria-hidden="true"><span class="octicon octicon-link"></span></a>有没有天气图标</h3>

<p>有，免费使用，在<a href="/docs/start/icons">这里</a></p>

<h3 id="city-list">
<a class="anchor" href="#city-list" aria-hidden="true"><span class="octicon octicon-link"></span></a>有没有城市ID？</h3>

<p>有，我们可以提供<a href="/docs/start/location-list">中国城市、中国景点等ID信息</a>，针对海外城市，由于数量众多，请使用<a href="/docs/api/geo/">城市信息搜索API</a>去查询详细的ID。</p>

<h3 id="more-questions">
<a class="anchor" href="#more-questions" aria-hidden="true"><span class="octicon octicon-link"></span></a>遇到其他技术问题怎么办</h3>

<p>如遇到更多技术问题，请登录控制台后发送工单，将有技术支持团队为你解答。也可以加入我们的开发者QQ群，和广大开发者进行交流沟通。</p>

<ul>
  <li>开发1群：257314412（已满）</li>
  <li>开发2群：728024289（已满）</li>
  <li>开发3群：613617443</li>
</ul>

                    
                </article>
            </section>
            
    </div>
</div>
<script src="/assets/js/bootstrap-3.3.7.min.js"></script>
<script src="/assets/js/cookie.min.js?v=202009082"></script>
<!-- <script src="/assets/js/baidu-analysis.js?v=202009082"></script> -->


</body>
</html>
