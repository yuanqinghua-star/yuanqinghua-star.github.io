<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="apple-itunes-app" content="app-id=1461458147, app-argument=weather"/>
    <link rel="stylesheet" href="/assets/css/bootstrap-3.3.7.min.css?v=202009082"/>
    <link rel="stylesheet" href="/assets/css/style.css?v=202009082"/>
    <script src="/assets/js/jquery-1.11.0.min.js?v=202009082"></script>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>

    
<header class="navbar-fixed-top">
  <nav class="container" id="header-nav">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">
        <img src="/assets/images/logo-white.png?v=202009082" alt="myBlog">
        <span>不停的博客</span>
      </a>
    </div>
    <ul class="nav navbar-nav navbar-left">
      <li ><a href="/">首页</a></li>
      <li ><a href="/works/tjxx/">工作经历</a></li>
      <li class="active"><a href="/docs/start/">笔记</a></li>
      <li><a href="https://github.com/yuanqinghua-star" target="_blank" >Github</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-left weather-widget visible-lg visible-md visible-sm">
    <li>
      <div id="he-plugin-simple"></div>
      <script>
        WIDGET = {
          CONFIG: {
            "modules": "20",
            "background": 5,
            "tmpColor": "FFFFFF",
            "tmpSize": "14",
            "cityColor": "FFFFFF",
            "citySize": "14",
            "aqiSize": "14",
            "weatherIconSize": "18",
            "alertIconSize": "14",
            "padding": "0px 0px 0px 0px",
            "shadow": "0",
            "language": "zh",
            "fixed": "false",
            "vertical": "middle",
            "horizontal": "center",
            "key": "acd0fdcab4b9481a98d0f59145420fac"
          }
        }
      </script>
      <script src="https://widget.heweather.net/simple/static/js/he-simple-common.js?v=1.2"></script>
    </li>
  </ul> 
  </nav>
</header>



<div class="container">
    <div class="row" id='docs-main'>
        
        <aside class="col-sm-3 col-md-3 col-lg-3 hidden-xs">
  <nav class="navbar navbar-default nav-stacked doc-nav">

    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/start/"
        title="开始">开始</a>
      <ul class="nav collapse ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/
          ">快速开始</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/get-api-key
          ">创建应用和KEY</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/status-code
          ">错误状态码</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/language
          ">多语言</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/icons
          ">天气图标</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/location-list
          ">常见城市列表</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/unit
          ">单位</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/start/glossary
          ">名词解释</a>
        </li>
        

      </ul>
    </div>
    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/sdk/"
        title="SDK">SDK</a>
      <ul class="nav collapse in ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/
          ">概述</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/ios-sdk
          ">iOS SDK</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/ios-entity
          ">iOS 数据类属性</a>
        </li>
        
        
        
        

        <li class="active" >
          <a class="doc-nav-item-link" href="
          /docs/sdk/android-sdk
          ">Android SDK</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/android-entity
          ">Android数据类属性</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/sdk/release
          ">下载和更新记录</a>
        </li>
        

      </ul>
    </div>
    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/widget/"
        title="天气插件">天气插件</a>
      <ul class="nav collapse ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/
          ">概述</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/ios-widget
          ">iOS天气插件</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/android-widget
          ">Android天气插件</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/mobile-page
          ">H5天气网页/频道页</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/standard-widget
          ">网页标准插件</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/widget/simple-widget
          ">网页简约插件</a>
        </li>
        

      </ul>
    </div>
    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/library/"
        title="代码库">代码库</a>
      <ul class="nav collapse ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/library/
          ">概述</a>
        </li>
        

      </ul>
    </div>
    
    

    <div class="doc-nav-group">
      <a class="doc-nav-title-link" href="/docs/faq/"
        title="常见问题">常见问题</a>
      <ul class="nav collapse ">

        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/faq/general
          ">一般问题</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/faq/buy
          ">商业数据和购买</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/faq/technical
          ">技术和开发</a>
        </li>
        
        
        
        

        <li >
          <a class="doc-nav-item-link" href="
          /docs/faq/user
          ">用户和账号</a>
        </li>
        

      </ul>
    </div>
    
  </nav>
</aside>

<!-- for mobile -->
<nav class="navbar navbar-default" id="header-slidebar">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
        data-target="#bs-example-navbar-collapse-1" aria-expanded="false" id="header-slidebar-btn">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">
        笔记
      </a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">开始<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/start/
              ">
                快速开始
              </a></li>
            
            
            
            <li><a href="
              /docs/start/get-api-key
              ">
                创建应用和KEY
              </a></li>
            
            
            
            <li><a href="
              /docs/start/status-code
              ">
                错误状态码
              </a></li>
            
            
            
            <li><a href="
              /docs/start/language
              ">
                多语言
              </a></li>
            
            
            
            <li><a href="
              /docs/start/icons
              ">
                天气图标
              </a></li>
            
            
            
            <li><a href="
              /docs/start/location-list
              ">
                常见城市列表
              </a></li>
            
            
            
            <li><a href="
              /docs/start/unit
              ">
                单位
              </a></li>
            
            
            
            <li><a href="
              /docs/start/glossary
              ">
                名词解释
              </a></li>
            
          </ul>
          
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">SDK<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/sdk/
              ">
                概述
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/ios-sdk
              ">
                iOS SDK
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/ios-entity
              ">
                iOS 数据类属性
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/android-sdk
              ">
                Android SDK
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/android-entity
              ">
                Android数据类属性
              </a></li>
            
            
            
            <li><a href="
              /docs/sdk/release
              ">
                下载和更新记录
              </a></li>
            
          </ul>
          
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">天气插件<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/widget/
              ">
                概述
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/ios-widget
              ">
                iOS天气插件
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/android-widget
              ">
                Android天气插件
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/mobile-page
              ">
                H5天气网页/频道页
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/standard-widget
              ">
                网页标准插件
              </a></li>
            
            
            
            <li><a href="
              /docs/widget/simple-widget
              ">
                网页简约插件
              </a></li>
            
          </ul>
          
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">代码库<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/library/
              ">
                概述
              </a></li>
            
          </ul>
          
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
            aria-expanded="false">常见问题<span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            
            <li><a href="
              /docs/faq/general
              ">
                一般问题
              </a></li>
            
            
            
            <li><a href="
              /docs/faq/buy
              ">
                商业数据和购买
              </a></li>
            
            
            
            <li><a href="
              /docs/faq/technical
              ">
                技术和开发
              </a></li>
            
            
            
            <li><a href="
              /docs/faq/user
              ">
                用户和账号
              </a></li>
            
          </ul>
          
        </li>
      </ul>
    </div>
  </div>
</nav>
        
        
            <section class="col-sm-9 col-md-9 col-lg-9 col-xs-12">
                
                <div class="docs-header">
                    <h1>Android SDK 使用文档</h1>
                    
                </div>
                <article class="docs-content">
                    
                    <h2 id="适配版本">适配版本</h2>

<p>Android 4.4+</p>

<h2 id="工程配置">工程配置</h2>

<ol>
  <li>解压文件，将文件夹内jar放入您的工程，并且引用</li>
  <li>配置Android Manifest 添加权限</li>
</ol>

<p><strong>权限列表</strong></p>

<table>
  <thead>
    <tr>
      <th>权限说明</th>
      <th>代码</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>允许连接网络</td>
      <td>android.permission.INTERNET</td>
    </tr>
    <tr>
      <td>访问GPS定位</td>
      <td>android.permission.ACCESS_FINE_LOCATION</td>
    </tr>
    <tr>
      <td>访问设备状态</td>
      <td>android.permission.READ_PHONE_STATE</td>
    </tr>
    <tr>
      <td>访问WIFI状态</td>
      <td>android.permission.ACCESS_WIFI_STATE</td>
    </tr>
  </tbody>
</table>

<p><strong>引用库</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    compile 'com.squareup.okhttp3:okhttp:3.9.0' （3.9.0+）
    compile 'com.google.code.gson:gson:2.6.2'   (2.6.2+)
</code></pre></div></div>

<p><strong>混淆</strong></p>

<p>请在您的混淆文件proguard-rules.pro中加入如下代码
请注意您引用的版本</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//  排除okhttp</span>
 <span class="o">-</span><span class="n">dontwarn</span> <span class="n">com</span><span class="o">.</span><span class="na">squareup</span><span class="o">.**</span>
 <span class="o">-</span><span class="n">dontwarn</span> <span class="n">okio</span><span class="o">.**</span>
 <span class="o">-</span><span class="n">keep</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">org</span><span class="o">.</span><span class="na">codehaus</span><span class="o">.*</span> <span class="o">{</span> <span class="o">*;</span> <span class="o">}</span>
 <span class="o">-</span><span class="n">keep</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">java</span><span class="o">.</span><span class="na">nio</span><span class="o">.*</span> <span class="o">{</span> <span class="o">*;</span> <span class="o">}</span>

<span class="c1">//  排除HeWeather</span>
 <span class="o">-</span><span class="n">dontwarn</span> <span class="n">interfaces</span><span class="o">.</span><span class="na">heweather</span><span class="o">.</span><span class="na">com</span><span class="o">.</span><span class="na">interfacesmodule</span><span class="o">.**</span>
 <span class="o">-</span><span class="n">keep</span> <span class="kd">class</span> <span class="nc">interfaces</span><span class="o">.</span><span class="na">heweather</span><span class="o">.</span><span class="na">com</span><span class="o">.</span><span class="na">interfacesmodule</span><span class="o">.**</span> <span class="o">{</span> <span class="o">*;}</span>
</code></pre></div></div>

<h2 id="数据访问代码">数据访问代码</h2>

<p><strong>日志功能</strong></p>

<p>SDK 不再提供日志功能， 错误信息可由回调函数 OnError 中的 Throwable 对象提供</p>

<p><strong>账户初始化</strong></p>

<p>使用 SDK 时，需提前进行账户初始化（全局执行一次即可）</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">HeConfig</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="s">"PublicId"</span><span class="o">,</span> <span class="s">"AppKey"</span><span class="o">);</span>
</code></pre></div></div>

<p><strong>选择API服务版本</strong></p>

<p>SDK 默认访问商业版服务，开发版用户可通过以下方法进行调整（全局执行一次即可）</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//切换至开发版服务</span>
<span class="nc">HeConfig</span><span class="o">.</span><span class="na">switchToDevService</span><span class="o">();</span>
<span class="c1">//切换至商业版服务</span>
<span class="nc">HeConfig</span><span class="o">.</span><span class="na">switchToBizService</span><span class="o">();</span>
</code></pre></div></div>

<p><strong>数据访问示例</strong></p>

<p>根据您的需求调用不同的方法，接口回调方法中的参数就是接口返回的数据类</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 实况天气数据
 * @param location 所查询的地区，可通过该地区名称、ID、IP和经纬度进行查询经纬度格式：经度,纬度
 *                 （英文,分隔，十进制格式，北纬东经为正，南纬西经为负)
 * @param lang     (选填)多语言，可以不使用该参数，默认为简体中文
 * @param unit     (选填)单位选择，公制（m）或英制（i），默认为公制单位
 * @param listener 网络访问结果回调
 */</span>

<span class="nc">HeWeather</span><span class="o">.</span><span class="na">getWeatherNow</span><span class="o">(</span><span class="nc">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">"CN101010100"</span><span class="o">,</span> <span class="nc">Lang</span><span class="o">.</span><span class="na">ZH_HANS</span><span class="o">,</span> <span class="nc">Unit</span><span class="o">.</span><span class="na">METRIC</span><span class="o">,</span> <span class="k">new</span> <span class="nc">HeWeather</span><span class="o">.</span><span class="na">OnResultWeatherNowListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"getWeather onError: "</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="nc">WeatherNowBean</span> <span class="n">weatherBean</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"getWeather onSuccess: "</span> <span class="o">+</span> <span class="k">new</span> <span class="nc">Gson</span><span class="o">().</span><span class="na">toJson</span><span class="o">(</span><span class="n">weatherBean</span><span class="o">));</span>
        <span class="c1">//先判断返回的status是否正确，当status正确时获取数据，若status不正确，可查看status对应的Code值找到原因</span>
        <span class="k">if</span> <span class="o">(</span><span class="nc">Code</span><span class="o">.</span><span class="na">OK</span><span class="o">.</span><span class="na">getCode</span><span class="o">().</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">weatherBean</span><span class="o">.</span><span class="na">getCode</span><span class="o">()))</span> <span class="o">{</span>
            <span class="nc">WeatherNowBean</span><span class="o">.</span><span class="na">NowBaseBean</span> <span class="n">now</span> <span class="o">=</span> <span class="n">weatherBean</span><span class="o">.</span><span class="na">getNow</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">//在此查看返回数据失败的原因</span>
            <span class="nc">String</span> <span class="n">status</span> <span class="o">=</span> <span class="n">weatherBean</span><span class="o">.</span><span class="na">getCode</span><span class="o">();</span>
            <span class="nc">Code</span> <span class="n">code</span> <span class="o">=</span> <span class="nc">Code</span><span class="o">.</span><span class="na">toEnum</span><span class="o">(</span><span class="n">status</span><span class="o">);</span>
            <span class="nc">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"failed code: "</span> <span class="o">+</span> <span class="n">code</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre></div></div>

                    
                </article>
            </section>
            
    </div>
</div>
<script src="/assets/js/bootstrap-3.3.7.min.js"></script>
<script src="/assets/js/cookie.min.js?v=202009082"></script>
<!-- <script src="/assets/js/baidu-analysis.js?v=202009082"></script> -->


</body>
</html>
